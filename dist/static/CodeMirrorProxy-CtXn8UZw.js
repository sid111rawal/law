const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/index-BEpRDSSZ.js","static/index-S7kdJGQo.js","static/index-BN3BTe13.js","static/sanity-uyinkvaq.js","static/index-DD3mFEgi.js","static/index-CLK1vVMw.js","static/index-DPsOYZpS.js","static/index-DBnGmfIk.js","static/index-CzRyMW-g.js","static/index-BYk6VYJJ.js","static/sass-BR7ksiGk.js","static/css-Bt2UjfAg.js"])))=>i.map(i=>d[i]);
import{r as l,ae as C,j as H,y as S,af as u,x as F,ag as B,ah as c}from"./sanity-uyinkvaq.js";import{o as m,H as z,s as $,S as q,R as G,t as a,l as J,p as A,D as p,q as d}from"./index-BN3BTe13.js";var W=e=>{var{theme:i,settings:t={},styles:o=[]}=e,r={".cm-gutters":{}},n={};t.background&&(n.backgroundColor=t.background),t.backgroundImage&&(n.backgroundImage=t.backgroundImage),t.foreground&&(n.color=t.foreground),t.fontSize&&(n.fontSize=t.fontSize),(t.background||t.foreground)&&(r["&"]=n),t.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(r[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(r[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(r[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(r[".cm-content"]={caretColor:t.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var s={};t.gutterActiveForeground&&(s.color=t.gutterActiveForeground),t.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:t.lineHighlight},s.backgroundColor=t.lineHighlight),r[".cm-activeLineGutter"]=s,t.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var g=m.theme(r,{dark:i==="dark"}),h=z.define(o),f=[g,$(h)];return f};const Q=[{name:"groq",loader:()=>c(async()=>{const{javascriptLanguage:e}=await import("./index-BEpRDSSZ.js");return{javascriptLanguage:e}},__vite__mapDeps([0,1,2,3])).then(({javascriptLanguage:e})=>e)},{name:"javascript",loader:()=>c(async()=>{const{javascript:e}=await import("./index-BEpRDSSZ.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!1}))},{name:"jsx",loader:()=>c(async()=>{const{javascript:e}=await import("./index-BEpRDSSZ.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!0}))},{name:"typescript",loader:()=>c(async()=>{const{javascript:e}=await import("./index-BEpRDSSZ.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!1,typescript:!0}))},{name:"tsx",loader:()=>c(async()=>{const{javascript:e}=await import("./index-BEpRDSSZ.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!0,typescript:!0}))},{name:"php",loader:()=>c(async()=>{const{php:e}=await import("./index-DD3mFEgi.js");return{php:e}},__vite__mapDeps([4,1,2,3,5,0])).then(({php:e})=>e())},{name:"sql",loader:()=>c(async()=>{const{sql:e}=await import("./index-DPsOYZpS.js");return{sql:e}},__vite__mapDeps([6,2,3,1])).then(({sql:e})=>e())},{name:"mysql",loader:()=>c(async()=>{const{sql:e,MySQL:i}=await import("./index-DPsOYZpS.js");return{sql:e,MySQL:i}},__vite__mapDeps([6,2,3,1])).then(({sql:e,MySQL:i})=>e({dialect:i}))},{name:"json",loader:()=>c(async()=>{const{json:e}=await import("./index-DBnGmfIk.js");return{json:e}},__vite__mapDeps([7,1,2,3])).then(({json:e})=>e())},{name:"markdown",loader:()=>c(async()=>{const{markdown:e}=await import("./index-CzRyMW-g.js");return{markdown:e}},__vite__mapDeps([8,2,3,5,1,0])).then(({markdown:e})=>e())},{name:"java",loader:()=>c(async()=>{const{java:e}=await import("./index-BYk6VYJJ.js");return{java:e}},__vite__mapDeps([9,1,2,3])).then(({java:e})=>e())},{name:"html",loader:()=>c(async()=>{const{html:e}=await import("./index-CLK1vVMw.js");return{html:e}},__vite__mapDeps([5,1,2,3,0])).then(({html:e})=>e())},{name:"csharp",loader:()=>c(async()=>{const{csharp:e}=await import("./clike-CjuBxE1O.js");return{csharp:e}},[]).then(({csharp:e})=>d.define(e))},{name:"sh",loader:()=>c(async()=>{const{shell:e}=await import("./shell-CjFT_Tl9.js");return{shell:e}},[]).then(({shell:e})=>d.define(e))},{name:"css",loader:()=>c(async()=>{const{css:e}=await import("./css-Bt2UjfAg.js");return{css:e}},[]).then(({css:e})=>d.define(e))},{name:"scss",loader:()=>c(async()=>{const{css:e}=await import("./css-Bt2UjfAg.js");return{css:e}},[]).then(({css:e})=>d.define(e))},{name:"sass",loader:()=>c(async()=>{const{sass:e}=await import("./sass-BR7ksiGk.js");return{sass:e}},__vite__mapDeps([10,11])).then(({sass:e})=>d.define(e))},{name:"ruby",loader:()=>c(async()=>{const{ruby:e}=await import("./ruby-B2Rjki9n.js");return{ruby:e}},[]).then(({ruby:e})=>d.define(e))},{name:"python",loader:()=>c(async()=>{const{python:e}=await import("./python-jWMSN8OU.js");return{python:e}},[]).then(({python:e})=>d.define(e))},{name:"xml",loader:()=>c(async()=>{const{xml:e}=await import("./xml-BFMHta2a.js");return{xml:e}},[]).then(({xml:e})=>d.define(e))},{name:"yaml",loader:()=>c(async()=>{const{yaml:e}=await import("./yaml-DsCXHVTH.js");return{yaml:e}},[]).then(({yaml:e})=>d.define(e))},{name:"golang",loader:()=>c(async()=>{const{go:e}=await import("./go-CTD25R5P.js");return{go:e}},[]).then(({go:e})=>d.define(e))},{name:"text",loader:()=>{}},{name:"batch",loader:()=>{}}];function O(e){return e.tone!=="neutral"&&e.tone!=="suggest"?e.tone:e.tone==="neutral"?"default":"primary"}const b="cm-highlight-line",k=A.define(),x=A.define(),v=q.define({create(){return p.none},update(e,i){e=e.map(i.changes);for(const t of i.effects)t.is(k)&&(e=e.update({add:[R.range(t.value)]})),t.is(x)&&(e=e.update({filter:o=>o!==t.value}));return e},toJSON(e,i){const t=[],o=e.iter();for(;o.value;){const r=i.doc.lineAt(o.from).number;t.includes(r)||t.push(r),o.next()}return t},fromJSON(e,i){const t=i.doc.lines,o=e.filter(r=>r<=t).map(r=>R.range(i.doc.line(r).from));o.sort((r,n)=>r.from-n.from);try{return p.none.update({add:o})}catch(r){return console.error(r),p.none}},provide:e=>m.decorations.from(e)}),R=p.line({class:b}),P={highlight:v};function K(e){const{themeCtx:i}=e,t=O(i),o={color:i.theme.color.dark[t]},r={color:i.theme.color.light[t]};return m.baseTheme({".cm-lineNumbers":{cursor:"default"},".cm-line.cm-line":{position:"relative"},[`.${b}::before`]:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:-3,content:"''",boxSizing:"border-box"},[`&dark .${b}::before`]:{background:u(o.color.muted.caution.pressed.bg,.5)},[`&light .${b}::before`]:{background:u(r.color.muted.caution.pressed.bg,.75)}})}const U=e=>{const i=K({themeCtx:e.theme});return[v,e.readOnly?[]:J({domEventHandlers:{mousedown:(t,o)=>{const r=t.state.doc.lineAt(o.from);let n=!1;return t.state.field(v).between(r.from,r.to,(s,g,h)=>{if(h)return n=!0,!1}),n?t.dispatch({effects:x.of(r.from)}):t.dispatch({effects:k.of(r.from)}),e?.onHighlightChange&&e.onHighlightChange(t.state.toJSON(P).highlight),!0}}}),i]};function X(e,i){const t=e.state.doc,o=t.lines,r=Array.from({length:o},(n,s)=>s+1);e.dispatch({effects:r.map(n=>{const s=t.line(n);return i?.includes(n)?k.of(s.from):x.of(s.from)})})}function Y(){const e=C();return l.useMemo(()=>{const i=O(e),t={color:e.theme.color.dark[i]},o={color:e.theme.color.light[i]};return m.baseTheme({"&.cm-editor":{height:"100%"},"&.cm-editor.cm-focused":{outline:"none"},"&.cm-editor.cm-focused .cm-matchingBracket":{backgroundColor:"transparent"},"&.cm-editor.cm-focused .cm-nonmatchingBracket":{backgroundColor:"transparent"},"&dark.cm-editor.cm-focused .cm-matchingBracket":{outline:`1px solid ${t.color.base.border}`},"&dark.cm-editor.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${t.color.base.border}`},"&light.cm-editor.cm-focused .cm-matchingBracket":{outline:`1px solid ${o.color.base.border}`},"&light.cm-editor.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${o.color.base.border}`},"& .cm-lineNumbers .cm-gutterElement":{minWidth:"32px !important",padding:"0 8px !important"},"& .cm-gutter.cm-foldGutter":{width:"0px !important"},"&dark .cm-gutters":{color:`${u(t.color.card.enabled.code.fg,.5)} !important`,borderRight:`1px solid ${u(t.color.base.border,.5)}`},"&light .cm-gutters":{color:`${u(o.color.card.enabled.code.fg,.5)} !important`,borderRight:`1px solid ${u(o.color.base.border,.5)}`}})},[e])}function Z(){const e=S();return l.useMemo(()=>{const{code:i}=e.sanity.fonts,{base:t,card:o,dark:r,syntax:n}=e.sanity.color;return W({theme:r?"dark":"light",settings:{background:o.enabled.bg,foreground:o.enabled.code.fg,lineHighlight:o.enabled.bg,fontFamily:i.family,caret:t.focusRing,selection:u(t.focusRing,.2),selectionMatch:u(t.focusRing,.4),gutterBackground:o.disabled.bg,gutterForeground:o.disabled.code.fg,gutterActiveForeground:o.enabled.fg},styles:[{tag:[a.heading,a.heading2,a.heading3,a.heading4,a.heading5,a.heading6],color:o.enabled.fg},{tag:a.angleBracket,color:o.enabled.code.fg},{tag:a.atom,color:n.keyword},{tag:a.attributeName,color:n.attrName},{tag:a.bool,color:n.boolean},{tag:a.bracket,color:o.enabled.code.fg},{tag:a.className,color:n.className},{tag:a.comment,color:n.comment},{tag:a.definition(a.typeName),color:n.function},{tag:[a.definition(a.variableName),a.function(a.variableName),a.className,a.attributeName],color:n.function},{tag:[a.function(a.propertyName),a.propertyName],color:n.function},{tag:a.keyword,color:n.keyword},{tag:a.null,color:n.number},{tag:a.number,color:n.number},{tag:a.meta,color:o.enabled.code.fg},{tag:a.operator,color:n.operator},{tag:a.propertyName,color:n.property},{tag:[a.string,a.special(a.brace)],color:n.string},{tag:a.tagName,color:n.className},{tag:a.typeName,color:n.keyword}]})},[e])}function ee(e){const{fontSize:i}=e,t=S();return l.useMemo(()=>{const{code:o}=t.sanity.fonts,{fontSize:r,lineHeight:n}=o.sizes[i]||o.sizes[2];return m.baseTheme({"&":{fontSize:F(r)},"& .cm-scroller":{lineHeight:`${n/r} !important`}})},[i,t])}const ne=l.forwardRef(function(e,i){const{basicSetup:t,highlightLines:o,languageMode:r,onHighlightChange:n,readOnly:s,value:g,...h}=e,f=C(),I=Z(),[y,D]=l.useState(void 0),L=Y(),T=ee({fontSize:1}),E=te(r),w=l.useMemo(()=>U({onHighlightChange:n,readOnly:s,theme:f}),[n,s,f]),M=l.useMemo(()=>{const _=[L,T,w,m.lineWrapping];return E?[..._,E]:_},[T,w,E,L]);l.useEffect(()=>{y&&X(y,o??[])},[y,o,g]);const N=l.useMemo(()=>({json:{doc:g??"",selection:{main:0,ranges:[{anchor:0,head:0}]},highlight:o??[]},fields:P}),[]),V=l.useCallback(_=>{D(_)},[]),j=l.useMemo(()=>t??{highlightActiveLine:!1},[t]);return H.jsx(G,{...h,value:g,ref:i,extensions:M,theme:I,onCreateEditor:V,initialState:N,basicSetup:j})});function te(e){const i=l.useContext(B),[t,o]=l.useState();return l.useEffect(()=>{const r=[...i?.codeModes??[],...Q].find(s=>s.name===e);r?.loader||console.warn(`Found no codeMode for language mode ${e}, syntax highlighting will be disabled.`);let n=!0;return Promise.resolve(r?.loader()).then(s=>{n&&o(s)}).catch(s=>{console.error(`Failed to load language mode ${e}`,s),n&&o(void 0)}),()=>{n=!1}},[e,i]),t}export{ne as default};
